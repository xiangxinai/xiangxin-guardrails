# æ›´æ–°æ—¥å¿— Changelog

æœ¬æ–‡ä»¶è®°å½•è±¡ä¿¡AIå®‰å…¨æŠ¤æ å¹³å°çš„æ‰€æœ‰é‡è¦å˜æ›´ã€‚

All notable changes to Xiangxin AI Guardrails platform are documented in this file.

éµå¾ª [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/) æ ¼å¼ï¼Œ
ç‰ˆæœ¬å·éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶](https://semver.org/lang/zh-CN/) è§„èŒƒã€‚

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.4.0] - 2025-10-04

### ğŸš€ é‡å¤§æ›´æ–° Major Updates
- ğŸ” **æ•æ„Ÿæ•°æ®é˜²æ³„æ¼åŠŸèƒ½ (Data Leak Detection)**
  - æ–°å¢åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„æ•æ„Ÿæ•°æ®æ£€æµ‹å’Œè„±æ•åŠŸèƒ½
  - æ”¯æŒæ£€æµ‹èº«ä»½è¯å·ã€æ‰‹æœºå·ã€é‚®ç®±ã€é“¶è¡Œå¡å·ã€æŠ¤ç…§å·ã€IPåœ°å€ç­‰æ•æ„Ÿä¿¡æ¯
  - æä¾›å¤šç§è„±æ•æ–¹æ³•ï¼šæ›¿æ¢ã€æ©ç ã€å“ˆå¸Œã€åŠ å¯†ã€é‡æ’ã€éšæœºæ›¿æ¢
  - æ”¯æŒè‡ªå®šä¹‰æ•æ„Ÿæ•°æ®ç±»å‹å’Œæ­£åˆ™è¡¨è¾¾å¼è§„åˆ™
  - åŒºåˆ†è¾“å…¥å’Œè¾“å‡ºæ£€æµ‹ï¼Œçµæ´»é…ç½®æ£€æµ‹èŒƒå›´
  - æ”¯æŒç³»ç»Ÿçº§å’Œç”¨æˆ·çº§é…ç½®

### æ–°å¢ Added
- ğŸ” **æ•°æ®å®‰å…¨æ£€æµ‹**
  - æ–°å¢æ•°æ®é˜²æ³„æ¼é…ç½®ç®¡ç†é¡µé¢
  - æ”¯æŒè‡ªå®šä¹‰æ•æ„Ÿæ•°æ®ç±»å‹å®šä¹‰ï¼ˆåç§°ã€æ­£åˆ™è¡¨è¾¾å¼ã€é£é™©ç­‰çº§ï¼‰
  - ä¸‰çº§é£é™©ç­‰çº§ï¼šä½é£é™©ã€ä¸­é£é™©ã€é«˜é£é™©
  - å…­ç§è„±æ•æ–¹æ³•ï¼šæ›¿æ¢(replace)ã€æ©ç (mask)ã€å“ˆå¸Œ(hash)ã€åŠ å¯†(encrypt)ã€é‡æ’(shuffle)ã€éšæœºæ›¿æ¢(random)
  - è¾“å…¥/è¾“å‡ºæ–¹å‘æ£€æµ‹é…ç½®
  - å†…ç½®å¸¸è§æ•æ„Ÿæ•°æ®ç±»å‹ï¼šID_CARD_NUMBERã€PHONE_NUMBERã€EMAILã€BANK_CARD_NUMBERã€PASSPORT_NUMBERã€IP_ADDRESSç­‰

- ğŸ“Š **æ£€æµ‹ç»“æœå¢å¼º**
  - æ£€æµ‹ç»“æœæ–°å¢ `data` å­—æ®µï¼ŒåŒ…å«æ•°æ®å®‰å…¨æ£€æµ‹ç»“æœ
  - å“åº”æ ¼å¼ï¼š`result.data.risk_level` å’Œ `result.data.categories`
  - æ€»è§ˆé¡µé¢æ–°å¢"å‘ç°æ•°æ®æ³„æ¼"ç»Ÿè®¡
  - åœ¨çº¿æµ‹è¯•é¡µé¢æ–°å¢æ•°æ®æ³„æ¼æµ‹è¯•æ ·ä¾‹
  - æ£€æµ‹ç»“æœåˆ—è¡¨æ–°å¢"æ•°æ®æ³„æ¼"åˆ—
  - é£é™©æŠ¥è¡¨æ–°å¢æ•°æ®æ³„æ¼ç»Ÿè®¡

- ğŸ—„ï¸ **æ•°æ®åº“å˜æ›´**
  - æ–°å¢ `data_security_patterns` è¡¨ï¼šå­˜å‚¨æ•æ„Ÿæ•°æ®æ¨¡å¼å®šä¹‰
  - æ–°å¢ `data_security_config` è¡¨ï¼šå­˜å‚¨æ•°æ®é˜²æ³„æ¼é…ç½®
  - `detection_results` è¡¨æ–°å¢ `data_risk_level` å’Œ `data_categories` å­—æ®µ
  - æ–°å¢æ•°æ®åº“è¿ç§»è„šæœ¬ï¼š
    - `backend/database/migrations/add_data_security_tables.sql`
    - `backend/database/migrations/add_data_security_fields.sql`

- ğŸ”§ **æ–°å¢æ–‡ä»¶**
  - `backend/routers/data_security.py` - æ•°æ®å®‰å…¨è·¯ç”±
  - `backend/services/data_security_service.py` - æ•°æ®å®‰å…¨æ£€æµ‹æœåŠ¡
  - `frontend/src/pages/DataSecurity/` - æ•°æ®é˜²æ³„æ¼é…ç½®é¡µé¢
  - `DATA_SECURITY_README.md` - æ•°æ®é˜²æ³„æ¼åŠŸèƒ½æ–‡æ¡£

### å˜æ›´ Changed
- ğŸ”„ **APIå“åº”æ ¼å¼æ›´æ–°**
  - æ£€æµ‹ç»“æœç»Ÿä¸€åŒ…å«ä¸‰ä¸ªç»´åº¦ï¼š`compliance`ã€`security`ã€`data`
  - å¢å¼ºçš„å“åº”æ ¼å¼ç¤ºä¾‹ï¼š
    ```json
    {
      "result": {
        "compliance": {"risk_level": "æ— é£é™©", "categories": []},
        "security": {"risk_level": "æ— é£é™©", "categories": []},
        "data": {"risk_level": "é«˜é£é™©", "categories": ["PHONE_NUMBER", "ID_CARD_NUMBER"]}
      },
      "suggest_answer": "æˆ‘çš„ç”µè¯æ˜¯<PHONE_NUMBER>ï¼Œèº«ä»½è¯æ˜¯<ID_CARD_NUMBER>"
    }
    ```

- ğŸ“± **å‰ç«¯æ›´æ–°**
  - æ€»è§ˆé¡µé¢é‡æ„ï¼Œæ–°å¢æ•°æ®æ³„æ¼é£é™©å¡ç‰‡
  - åœ¨çº¿æµ‹è¯•é¡µé¢æ–°å¢æ•°æ®æ³„æ¼æ ·ä¾‹
  - æ£€æµ‹ç»“æœé¡µé¢æ–°å¢æ•°æ®æ³„æ¼ç­›é€‰å’Œå±•ç¤º
  - é£é™©æŠ¥è¡¨é¡µé¢æ–°å¢æ•°æ®æ³„æ¼ç»Ÿè®¡å›¾è¡¨
  - é˜²æŠ¤é…ç½®æ–°å¢æ•°æ®é˜²æ³„æ¼å­èœå•

- ğŸ”§ **åç«¯æœåŠ¡å¢å¼º**
  - æ£€æµ‹æµç¨‹æ•´åˆæ•°æ®å®‰å…¨æ£€æµ‹
  - æ”¯æŒè¾“å…¥å’Œè¾“å‡ºä¸¤ä¸ªæ–¹å‘çš„æ•°æ®æ£€æµ‹
  - å¤šé£é™©ç±»å‹ç»¼åˆå†³ç­–ï¼šä»¥æœ€é«˜é£é™©ç­‰çº§å†³å®šæœ€ç»ˆå»ºè®®è¡ŒåŠ¨
  - è„±æ•ç»“æœé€šè¿‡ `suggest_answer` è¿”å›

### ä¿®å¤ Fixed
- ğŸ› **æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–**
  - ä¿®å¤é«˜å¹¶å‘åœºæ™¯ä¸‹æ•°æ®åº“è¿æ¥æ± æ³„æ¼é—®é¢˜
  - ä¼˜åŒ–è¿æ¥æ± é…ç½®å‚æ•°

- ğŸ”§ **æ­£åˆ™è¡¨è¾¾å¼è¾¹ç•Œé—®é¢˜**
  - ä¿®å¤ä¸­æ–‡æ–‡æœ¬ä¸­æ­£åˆ™è¡¨è¾¾å¼è¾¹ç•ŒåŒ¹é…é—®é¢˜
  - ä¼˜åŒ–ä¸­æ–‡å­—ç¬¦çš„è¾¹ç•Œæ£€æµ‹é€»è¾‘

### SDK æ›´æ–° SDK Updates
- ğŸ“¦ **æ‰€æœ‰SDKæ›´æ–°ä»¥æ”¯æŒæ–°å“åº”æ ¼å¼**
  - Python SDK (xiangxinai)
  - Go SDK (xiangxinai-go)
  - Node.js SDK (xiangxinai)
  - Java SDK (xiangxinai-java)

### ä½¿ç”¨ç¤ºä¾‹ Usage Examples

#### é…ç½®æ•æ„Ÿæ•°æ®ç±»å‹
```python
# é€šè¿‡APIé…ç½®æ•æ„Ÿæ•°æ®ç±»å‹
import requests

response = requests.post(
    "http://localhost:5000/api/v1/data-security/patterns",
    headers={"Authorization": "Bearer your-api-key"},
    json={
        "name": "ID_CARD_NUMBER",
        "pattern": r"\b[1-8]{2}[0-9]{4}[0-9]{4}((0[1-9])|(1[0-2]))((0[1-9])|(1[0-9])|(2[0-9])|(3[0-1]))[0-9]{3}[0-9xX]\b",
        "risk_level": "é«˜",
        "masking_method": "replace"
    }
)
```

#### æ£€æµ‹å“åº”ç¤ºä¾‹
```json
{
    "id": "guardrails-6048ed54e2bb482d894d6cb8c3842153",
    "overall_risk_level": "é«˜é£é™©",
    "suggest_action": "ä»£ç­”",
    "suggest_answer": "æˆ‘çš„ç”µè¯å·ç æ˜¯<PHONE_NUMBER>,é“¶è¡Œå¡å·æ˜¯<BANK_CARD_NUMBER>,èº«ä»½è¯å·æ˜¯<ID_CARD_NUMBER>",
    "score": 0.999998927117538,
    "result": {
        "compliance": {"risk_level": "æ— é£é™©", "categories": []},
        "security": {"risk_level": "æ— é£é™©", "categories": []},
        "data": {"risk_level": "é«˜é£é™©", "categories": ["BANK_CARD_NUMBER", "ID_CARD_NUMBER", "PHONE_NUMBER"]}
    }
}
```

### æŠ€æœ¯ç‰¹æ€§ Technical Features
- **æ£€æµ‹æ–¹å‘é…ç½®**ï¼šæ”¯æŒä»…è¾“å…¥æ£€æµ‹ã€ä»…è¾“å‡ºæ£€æµ‹ã€æˆ–åŒå‘æ£€æµ‹
- **è‡ªå®šä¹‰è§„åˆ™**ï¼šç”¨æˆ·å¯å®Œå…¨è‡ªå®šä¹‰æ•æ„Ÿæ•°æ®æ£€æµ‹è§„åˆ™
- **æ€§èƒ½ä¼˜åŒ–**ï¼šæ­£åˆ™åŒ¹é…ä¼˜åŒ–ï¼Œæ”¯æŒé«˜å¹¶å‘æ£€æµ‹
- **éš”ç¦»å­˜å‚¨**ï¼šç”¨æˆ·çº§é…ç½®å®Œå…¨éš”ç¦»

### æ–‡æ¡£æ›´æ–° Documentation Updates
- æ›´æ–° README.md æ·»åŠ æ•°æ®é˜²æ³„æ¼åŠŸèƒ½è¯´æ˜
- æ›´æ–° README_ZH.md æ·»åŠ æ•°æ®é˜²æ³„æ¼ä¸­æ–‡æ–‡æ¡£
- æ–°å¢ DATA_SECURITY_README.md è¯¦ç»†åŠŸèƒ½æ–‡æ¡£
- æ›´æ–° API æ–‡æ¡£è¯´æ˜æ–°çš„å“åº”æ ¼å¼

---

## [2.3.0] - 2025-09-30

### ğŸš€ é‡å¤§æ›´æ–° Major Updates
- ğŸ–¼ï¸ **å¤šæ¨¡æ€æ£€æµ‹åŠŸèƒ½**
  - æ–°å¢å›¾ç‰‡æ¨¡æ€å®‰å…¨æ£€æµ‹èƒ½åŠ›
  - æ”¯æŒå›¾ç‰‡å†…å®¹çš„åˆè§„æ€§å’Œå®‰å…¨æ€§æ£€æµ‹
  - ä¸æ–‡æœ¬æ£€æµ‹ä¿æŒä¸€è‡´çš„é£é™©ç±»å‹å’Œæ£€æµ‹æ ‡å‡†
  - å®Œæ•´æ”¯æŒAPIè°ƒç”¨æ¨¡å¼å’Œå®‰å…¨ç½‘å…³æ¨¡å¼

### æ–°å¢ Added
- ğŸ–¼ï¸ **å›¾ç‰‡æ£€æµ‹åŠŸèƒ½**
  - æ”¯æŒbase64ç¼–ç å’ŒURLä¸¤ç§å›¾ç‰‡è¾“å…¥æ–¹å¼
  - è°ƒç”¨å¤šæ¨¡æ€æ£€æµ‹æ¨¡å‹ `Xiangxin-Guardrails-VL`
  - å›¾ç‰‡æ–‡ä»¶å­˜å‚¨åœ¨ç”¨æˆ·ä¸“å±ç›®å½•ï¼ˆ/mnt/data/xiangxin-guardrails-data/media/{user_uuid}/ï¼‰
  - æ”¯æŒåœ¨çº¿æµ‹è¯•ç•Œé¢ä¸Šä¼ å›¾ç‰‡è¿›è¡Œæ£€æµ‹
  - æ–°å¢å›¾ç‰‡ä¸Šä¼ ç»„ä»¶å’Œé¢„è§ˆåŠŸèƒ½

- ğŸ”Œ **APIæ¥å£å¢å¼º**
  - æ£€æµ‹APIæ”¯æŒæ··åˆæ¶ˆæ¯ï¼ˆæ–‡æœ¬+å›¾ç‰‡ï¼‰
  - messagesä¸­çš„contentæ”¯æŒæ•°ç»„æ ¼å¼ï¼š`[{"type": "text"}, {"type": "image_url"}]`
  - å›¾ç‰‡URLæ”¯æŒ `data:image/jpeg;base64,...` å’Œ `file://...` ä¸¤ç§æ ¼å¼
  - å®‰å…¨ç½‘å…³ä»£ç†æœåŠ¡å®Œæ•´æ”¯æŒå¤šæ¨¡æ€è¯·æ±‚é€ä¼ 

- ğŸ“ **æ–°å¢æ–‡ä»¶**
  - `backend/routers/media.py` - åª’ä½“æ–‡ä»¶ç®¡ç†è·¯ç”±
  - `backend/utils/image_utils.py` - å›¾ç‰‡å¤„ç†å·¥å…·
  - `backend/utils/url_signature.py` - URLç­¾åéªŒè¯å·¥å…·
  - `backend/scripts/migrate_add_image_fields.py` - æ•°æ®åº“è¿ç§»è„šæœ¬
  - `frontend/src/components/ImageUpload/` - å›¾ç‰‡ä¸Šä¼ ç»„ä»¶

### å˜æ›´ Changed
- ğŸ”„ **æ£€æµ‹æœåŠ¡å¢å¼º**
  - æ£€æµ‹æ¨¡å‹è°ƒç”¨é€»è¾‘æ”¯æŒå¤šæ¨¡æ€å†…å®¹
  - æ£€æµ‹ç»“æœæ•°æ®åº“è¡¨æ–°å¢å›¾ç‰‡ç›¸å…³å­—æ®µ
  - åœ¨çº¿æµ‹è¯•é¡µé¢æ”¯æŒå›¾ç‰‡ä¸Šä¼ å’Œé¢„è§ˆ

- ğŸŒ **APIå“åº”æ ¼å¼**
  - ä¿æŒä¸æ–‡æœ¬æ£€æµ‹ä¸€è‡´çš„å“åº”æ ¼å¼
  - å¤šæ ‡ç­¾é£é™©æ”¯æŒï¼šå¯è¿”å›å¤šä¸ªunsafeæ ‡ç­¾ï¼ˆå¦‚ï¼šunsafe\nS1,S2ï¼‰
  - æ•æ„Ÿåº¦åˆ†æ•°å’Œç­‰çº§é€‚ç”¨äºå›¾ç‰‡æ£€æµ‹

### æŠ€æœ¯ç‰¹æ€§ Technical Features
- **å›¾ç‰‡æ£€æµ‹æ¨¡å‹**ï¼šåŸºäºè§†è§‰-è¯­è¨€æ¨¡å‹çš„å¤šæ¨¡æ€å®‰å…¨æ£€æµ‹
- **å­˜å‚¨ç®¡ç†**ï¼šç”¨æˆ·çº§åˆ«çš„åª’ä½“æ–‡ä»¶éš”ç¦»å­˜å‚¨
- **URLå®‰å…¨**ï¼šæ”¯æŒç­¾åURLé˜²æ­¢æœªæˆæƒè®¿é—®
- **æ ¼å¼å…¼å®¹**ï¼šå…¼å®¹OpenAI Vision APIæ¶ˆæ¯æ ¼å¼

### ä½¿ç”¨ç¤ºä¾‹ Usage Examples

#### Python APIè°ƒç”¨ç¤ºä¾‹
```python
import base64
from xiangxinai import XiangxinAI

client = XiangxinAI("your-api-key")

# å›¾ç‰‡base64ç¼–ç 
with open("image.jpg", "rb") as f:
    image_base64 = base64.b64encode(f.read()).decode("utf-8")

# å‘é€å›¾ç‰‡æ£€æµ‹è¯·æ±‚
response = client.check_messages([
    {
        "role": "user",
        "content": [
            {"type": "text", "text": "è¿™ä¸ªå›¾ç‰‡å®‰å…¨å—ï¼Ÿ"},
            {"type": "image_url", "image_url": {"url": f"data:image/jpeg;base64,{image_base64}"}}
        ]
    }
])

print(f"æ£€æµ‹ç»“æœ: {response.overall_risk_level}")
print(f"é£é™©ç±»åˆ«: {response.all_categories}")
```

#### cURLè°ƒç”¨ç¤ºä¾‹
```bash
curl -X POST "http://localhost:5001/v1/guardrails" \
    -H "Authorization: Bearer your-api-key" \
    -H "Content-Type: application/json" \
    -d '{
      "model": "Xiangxin-Guardrails-VL",
      "messages": [{
        "role": "user",
        "content": [
          {"type": "text", "text": "è¿™ä¸ªå›¾ç‰‡å®‰å…¨å—ï¼Ÿ"},
          {"type": "image_url", "image_url": {"url": "data:image/jpeg;base64,..."}}
        ]
      }],
      "logprobs": true
    }'
```

## [2.2.0] - 2025-01-15

### ğŸš€ é‡å¤§æ›´æ–° Major Updates
- ğŸ§  **ä»£ç­”çŸ¥è¯†åº“åŠŸèƒ½** 
  - å…¨æ–°çš„æ™ºèƒ½ä»£ç­”ç³»ç»Ÿï¼ŒåŸºäºå‘é‡ç›¸ä¼¼åº¦æœç´¢
  - æ”¯æŒä¸Šä¼ é—®ç­”å¯¹æ–‡ä»¶ï¼Œè‡ªåŠ¨æ„å»ºçŸ¥è¯†åº“å‘é‡ç´¢å¼•
  - é£é™©æ£€æµ‹æ—¶ä¼˜å…ˆåŒ¹é…çŸ¥è¯†åº“ä¸­çš„ç›¸ä¼¼é—®é¢˜ï¼Œè¿”å›å¯¹åº”ç­”æ¡ˆ
  - æ”¯æŒå…¨å±€çŸ¥è¯†åº“å’Œç”¨æˆ·çº§çŸ¥è¯†åº“ï¼Œç®¡ç†å‘˜å¯é…ç½®å…¨å±€ç”Ÿæ•ˆçš„çŸ¥è¯†åº“
  
### æ–°å¢ Added
- ğŸ“š **ä»£ç­”çŸ¥è¯†åº“ç®¡ç†**
  - Webç•Œé¢æ”¯æŒçŸ¥è¯†åº“åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
  - JSONLæ ¼å¼é—®ç­”å¯¹æ–‡ä»¶ä¸Šä¼ å’ŒéªŒè¯
  - å‘é‡ç´¢å¼•è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†
  - çŸ¥è¯†åº“æœç´¢æµ‹è¯•åŠŸèƒ½
  - æ”¯æŒæ–‡ä»¶æ›¿æ¢å’Œé‡æ–°ç´¢å¼•

- ğŸ¯ **æ™ºèƒ½ä»£ç­”ç­–ç•¥**
  - é£é™©æ£€æµ‹è§¦å‘æ—¶ï¼Œä¼˜å…ˆæœç´¢çŸ¥è¯†åº“ç›¸ä¼¼é—®é¢˜
  - åŸºäºä½™å¼¦ç›¸ä¼¼åº¦çš„é—®é¢˜åŒ¹é…ç®—æ³•
  - å¯é…ç½®ç›¸ä¼¼åº¦é˜ˆå€¼å’Œè¿”å›ç»“æœæ•°é‡
  - æœªæ‰¾åˆ°ç›¸ä¼¼é—®é¢˜æ—¶ï¼Œå›é€€åˆ°ä¼ ç»Ÿæ‹’ç­”æ¨¡æ¿

### æ–°å¢é…ç½® New Configuration
- `EMBEDDING_API_BASE_URL` - Embedding APIæœåŠ¡åœ°å€
- `EMBEDDING_API_KEY` - Embedding APIå¯†é’¥
- `EMBEDDING_MODEL_NAME` - Embeddingæ¨¡å‹åç§°
- `EMBEDDING_MODEL_DIMENSION` - å‘é‡ç»´åº¦é…ç½®
- `EMBEDDING_SIMILARITY_THRESHOLD` - ç›¸ä¼¼åº¦é˜ˆå€¼
- `EMBEDDING_MAX_RESULTS` - æœ€å¤§è¿”å›ç»“æœæ•°


#### çŸ¥è¯†åº“æ–‡ä»¶æ ¼å¼
```jsonl
{"questionid": "q1", "question": "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ", "answer": "äººå·¥æ™ºèƒ½æ˜¯æ¨¡æ‹Ÿäººç±»æ™ºèƒ½çš„æŠ€æœ¯ã€‚"}
{"questionid": "q2", "question": "å¦‚ä½•ä½¿ç”¨æœºå™¨å­¦ä¹ ï¼Ÿ", "answer": "æœºå™¨å­¦ä¹ æ˜¯AIçš„ä¸€ä¸ªé‡è¦åˆ†æ”¯..."}
```

## [2.1.0] - 2025-09-29
å¢åŠ æ•æ„Ÿåº¦é˜ˆå€¼é…ç½®åŠŸèƒ½ï¼Œå¯è‡ªå®šä¹‰æ£€æµ‹çš„æ•æ„Ÿåº¦é˜ˆå€¼ï¼Œå¯ç”¨äºåº”å¯¹ç‰¹æ®Šåœºæ™¯æˆ–å…¨è‡ªåŠ¨æµæ°´çº¿åœºæ™¯ã€‚

## [2.0.0] - 2025-01-01

### ğŸš€ é‡å¤§æ›´æ–° Major Updates
- ğŸ›¡ï¸ **å…¨æ–°å®‰å…¨ç½‘å…³æ¨¡å¼** 
  - æ–°å¢åå‘ä»£ç†æœåŠ¡(proxy-service)ï¼Œæ”¯æŒOpenAIå…¼å®¹çš„é€æ˜ä»£ç†
  - å®ç°WAFé£æ ¼çš„AIå®‰å…¨é˜²æŠ¤ï¼Œè‡ªåŠ¨æ£€æµ‹è¾“å…¥å’Œè¾“å‡º
  - æ”¯æŒä¸Šæ¸¸æ¨¡å‹ç®¡ç†ï¼Œä¸€é”®é…ç½®ä¿æŠ¤ç›®æ ‡æ¨¡å‹
  - é›¶ä»£ç æ”¹é€ æ¥å…¥ï¼Œåªéœ€ä¿®æ”¹base_urlå’Œapi_key

- ğŸ—ï¸ **ä¸‰æœåŠ¡æ¶æ„é‡æ„**
  - **ç®¡ç†æœåŠ¡**(5000ç«¯å£)ï¼šå¤„ç†ç®¡ç†å¹³å°APIï¼Œä½å¹¶å‘ä¼˜åŒ–
  - **æ£€æµ‹æœåŠ¡**(5001ç«¯å£)ï¼šé«˜å¹¶å‘æŠ¤æ æ£€æµ‹API
  - **ä»£ç†æœåŠ¡**(5002ç«¯å£)ï¼šé«˜å¹¶å‘å®‰å…¨ç½‘å…³åå‘ä»£ç†
  - æ¶æ„ä¼˜åŒ–ï¼šæ•°æ®åº“è¿æ¥æ•°ä»4,800é™è‡³176ï¼ˆå‡å°‘96%ï¼‰

### æ–°å¢ Added
- ğŸ”Œ **åŒæ¨¡å¼æ”¯æŒ**
  - **APIè°ƒç”¨æ¨¡å¼**ï¼šå¼€å‘è€…ä¸»åŠ¨è°ƒç”¨æ£€æµ‹APIè¿›è¡Œå®‰å…¨æ£€æµ‹
  - **å®‰å…¨ç½‘å…³æ¨¡å¼**ï¼šé€æ˜åå‘ä»£ç†ï¼Œè‡ªåŠ¨æ‹¦æˆªå’Œæ£€æµ‹AIäº¤äº’

- ğŸ¯ **ä¸Šæ¸¸æ¨¡å‹ç®¡ç†**
  - Webç•Œé¢é…ç½®ä¸Šæ¸¸æ¨¡å‹ï¼ˆOpenAIã€Claudeã€æœ¬åœ°æ¨¡å‹ç­‰ï¼‰
  - APIå¯†é’¥ç®¡ç†å’Œå®‰å…¨å­˜å‚¨
  - è¯·æ±‚è½¬å‘å’Œå“åº”ä»£ç†
  - ç”¨æˆ·çº§åˆ«çš„æ¨¡å‹è®¿é—®æ§åˆ¶

- ğŸš¦ **æ™ºèƒ½ä»£ç†ç­–ç•¥**
  - è¾“å…¥æ£€æµ‹ï¼šç”¨æˆ·è¯·æ±‚é¢„å¤„ç†å’Œå®‰å…¨è¿‡æ»¤
  - è¾“å‡ºæ£€æµ‹ï¼šAIå›å¤å†…å®¹å®‰å…¨å®¡æŸ¥
  - è‡ªåŠ¨é˜»æ–­ï¼šé«˜é£é™©å†…å®¹æ™ºèƒ½æ‹¦æˆª
  - ä»£ç­”åŠŸèƒ½ï¼šå®‰å…¨å›å¤æ¨¡æ¿è‡ªåŠ¨æ›¿æ¢

- ğŸ³ **Dockeréƒ¨ç½²æ¶æ„ä¼˜åŒ–**
  - Docker Composeæ”¯æŒä¸‰æœåŠ¡æ¶æ„
  - ç‹¬ç«‹çš„æ£€æµ‹ã€ç®¡ç†ã€ä»£ç†æœåŠ¡å®¹å™¨
  - ç»Ÿä¸€çš„æ•°æ®ç›®å½•æŒ‚è½½å’Œæ—¥å¿—ç®¡ç†
  - è‡ªåŠ¨å¥åº·æ£€æŸ¥å’ŒæœåŠ¡å‘ç°

- ğŸ“ **æ–°å¢æ–‡ä»¶**
  - `backend/proxy_service.py` - å®‰å…¨ç½‘å…³åå‘ä»£ç†æœåŠ¡å…¥å£
  - `backend/start_proxy_service.py` - ä»£ç†æœåŠ¡å¯åŠ¨è„šæœ¬
  - `backend/start_all_services.sh` - ä¸‰æœåŠ¡å¯åŠ¨è„šæœ¬
  - `backend/stop_all_services.sh` - ä¸‰æœåŠ¡åœæ­¢è„šæœ¬
  - `backend/services/proxy_service.py` - ä»£ç†æœåŠ¡æ ¸å¿ƒé€»è¾‘
  - `backend/routers/proxy_api.py` - ä»£ç†APIè·¯ç”±
  - `backend/routers/proxy_management.py` - ä»£ç†ç®¡ç†APIè·¯ç”±
  - `frontend/src/pages/Config/ProxyModelManagement.tsx` - ä¸Šæ¸¸æ¨¡å‹ç®¡ç†ç•Œé¢
  - `examples/proxy_usage_demo.py` - ä»£ç†æœåŠ¡ä½¿ç”¨ç¤ºä¾‹

- ğŸ”Œ **ç§æœ‰åŒ–é›†æˆæ¨¡å¼** ğŸ†•
  - æ”¯æŒä¸å®¢æˆ·ç°æœ‰ç”¨æˆ·ç³»ç»Ÿæ·±åº¦é›†æˆ
  - æ–°å¢ `STORE_DETECTION_RESULTS` é…ç½®å¼€å…³ï¼Œæ§åˆ¶æ£€æµ‹ç»“æœå­˜å‚¨æ–¹å¼
  - å®¢æˆ·å¯é€šè¿‡APIç®¡ç†ç”¨æˆ·çº§åˆ«çš„é»‘ç™½åå•å’Œä»£ç­”æ¨¡æ¿
  - JWTè®¤è¯ç¡®ä¿ç”¨æˆ·æ•°æ®å®Œå…¨éš”ç¦»

### å˜æ›´ Changed
- ğŸ”„ **æ¶æ„é‡æ„**
  - å°†å•ä¸€æœåŠ¡é‡æ„ä¸ºä¸‰æœåŠ¡æ¶æ„ï¼Œæ˜¾è‘—æå‡æ€§èƒ½å’Œå¯æ‰©å±•æ€§
  - æ£€æµ‹æœåŠ¡ï¼š32ä¸ªé«˜å¹¶å‘è¿›ç¨‹ï¼Œä¸“æ³¨APIæ£€æµ‹
  - ç®¡ç†æœåŠ¡ï¼š2ä¸ªè½»é‡çº§è¿›ç¨‹ï¼Œå¤„ç†ç®¡ç†åŠŸèƒ½
  - ä»£ç†æœåŠ¡ï¼š24ä¸ªé«˜å¹¶å‘è¿›ç¨‹ï¼Œå¤„ç†å®‰å…¨ç½‘å…³
  - æ—¥å¿—ç›®å½•é…ç½®ç»Ÿä¸€ä½¿ç”¨DATA_DIRç¯å¢ƒå˜é‡

- ğŸŒ **APIè·¯ç”±æ›´æ–°**
  - æ£€æµ‹APIï¼š`/v1/guardrails` (5001ç«¯å£)
  - ç®¡ç†APIï¼š`/api/v1/*` (5000ç«¯å£) 
  - ä»£ç†APIï¼šOpenAIå…¼å®¹æ ¼å¼ (5002ç«¯å£)
  - æ–°å¢ä»£ç†ç®¡ç†APIï¼š`/api/v1/proxy/*`
  - å¥åº·æ£€æŸ¥ç«¯ç‚¹åˆ†åˆ«å¯¹åº”ä¸‰ä¸ªæœåŠ¡

- ğŸ“¦ **éƒ¨ç½²é…ç½®æ›´æ–°**
  - Docker Composeæ”¯æŒä¸‰æœåŠ¡å®¹å™¨ç‹¬ç«‹éƒ¨ç½²
  - ç¯å¢ƒå˜é‡æ–°å¢ä»£ç†æœåŠ¡ç›¸å…³é…ç½®
  - ç»Ÿä¸€çš„æ•°æ®ç›®å½•æŒ‚è½½ç­–ç•¥
  - è‡ªåŠ¨åŒ–æœåŠ¡å¯åŠ¨å’Œåœæ­¢è„šæœ¬

- ğŸ”§ **é…ç½®ä¼˜åŒ–**
  - æ–°å¢ä»£ç†æœåŠ¡é…ç½®ï¼š`PROXY_PORT`ã€`PROXY_UVICORN_WORKERS`
  - ä¼˜åŒ–æ•°æ®åº“è¿æ¥æ± åˆ†ç¦»é…ç½®
  - æ–°å¢ä¸Šæ¸¸æ¨¡å‹é…ç½®ç®¡ç†
  - æ”¯æŒå¤šç§AIæ¨¡å‹æä¾›å•†æ¥å…¥

- ğŸ“Š **æ•°æ®æµæ¶æ„é‡è®¾è®¡**
  ```
  # APIè°ƒç”¨æ¨¡å¼
  å®¢æˆ·ç«¯ â†’ æ£€æµ‹æœåŠ¡(5001) â†’ æŠ¤æ æ£€æµ‹ â†’ è¿”å›ç»“æœ
  
  # å®‰å…¨ç½‘å…³æ¨¡å¼  
  å®¢æˆ·ç«¯ â†’ ä»£ç†æœåŠ¡(5002) â†’ è¾“å…¥æ£€æµ‹ â†’ ä¸Šæ¸¸æ¨¡å‹ â†’ è¾“å‡ºæ£€æµ‹ â†’ è¿”å›ç»“æœ
  
  # ç®¡ç†æ¨¡å¼
  ç®¡ç†ç•Œé¢ â†’ ç®¡ç†æœåŠ¡(5000) â†’ é…ç½®ç®¡ç† â†’ æ•°æ®åº“
  ```

### ä¿®å¤ Fixed
- ğŸ› **æ•°æ®åº“è¿æ¥æ± é—®é¢˜**
  - è§£å†³é«˜å¹¶å‘ä¸‹æ•°æ®åº“è¿æ¥è€—å°½çš„é£é™©
  - ä¼˜åŒ–ä¸‰æœåŠ¡æ¶æ„çš„è¿æ¥æ± åˆ†é…
  - å‡å°‘ä¸å¿…è¦çš„æ•°æ®åº“æ“ä½œï¼Œæå‡å“åº”é€Ÿåº¦

### æŠ€æœ¯å€ºåŠ¡ Technical Debt
- ç§»é™¤äº†è¿‡æ—¶çš„å•ä¸€æœåŠ¡å¯åŠ¨æ–¹å¼
- ä¼˜åŒ–äº†Dockeré•œåƒæ„å»ºç­–ç•¥
- ç»Ÿä¸€äº†é…ç½®æ–‡ä»¶ç®¡ç†æ–¹å¼

### è®¡åˆ’ä¸­ Planned
- [ ] å¤šæ¨¡æ€å†…å®¹æ£€æµ‹æ”¯æŒï¼ˆå›¾åƒã€éŸ³é¢‘ï¼‰
- [ ] è¾¹ç¼˜è®¡ç®—è½»é‡åŒ–éƒ¨ç½²æ–¹æ¡ˆ
- [ ] ç§»åŠ¨ç«¯SDKæ”¯æŒ
- [ ] æ›´å¤šè¯­è¨€æ¨¡å‹é€‚é…
- [ ] è”é‚¦å­¦ä¹ éšç§ä¿æŠ¤èƒ½åŠ›

## [1.0.0] - 2024-08-09

### æ–°å¢ Added
- ğŸ›¡ï¸ **æ ¸å¿ƒå®‰å…¨æ£€æµ‹åŠŸèƒ½**
  - 12ä¸ªç»´åº¦çš„å®‰å…¨æ£€æµ‹èƒ½åŠ›
  - æç¤ºè¯æ”»å‡»æ£€æµ‹ï¼ˆS9ç±»åˆ«ï¼‰
  - å†…å®¹åˆè§„æ£€æµ‹ï¼ˆS1-S8, S10-S12ç±»åˆ«ï¼‰
  - 4çº§é£é™©åˆ†ç±»ï¼šæ— é£é™©ã€ä½é£é™©ã€ä¸­é£é™©ã€é«˜é£é™©

- ğŸ§  **ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ£€æµ‹**
  - æ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç†è§£
  - åŸºäºå®Œæ•´ä¼šè¯å†å²çš„æ™ºèƒ½å®‰å…¨è¯„ä¼°
  - ä¸Šä¸‹æ–‡ç›¸å…³çš„é£é™©è¯†åˆ«èƒ½åŠ›

- ğŸ—ï¸ **å®Œæ•´ç³»ç»Ÿæ¶æ„**
  - FastAPIåç«¯APIæœåŠ¡
  - Reactå‰ç«¯ç®¡ç†ç•Œé¢
  - PostgreSQLæ•°æ®åº“æ”¯æŒ
  - Dockerå®¹å™¨åŒ–éƒ¨ç½²

- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ**
  - ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€è®¤è¯
  - APIå¯†é’¥ç®¡ç†
  - åŸºäºJWTçš„èº«ä»½éªŒè¯
  - ç®¡ç†å‘˜æƒé™æ§åˆ¶

- âš™ï¸ **çµæ´»é…ç½®ç®¡ç†**
  - é»‘åå•å…³é”®è¯åº“ç®¡ç†
  - ç™½åå•å…³é”®è¯åº“ç®¡ç†
  - ä»£ç­”æ¨¡æ¿åº“é…ç½®
  - ç”¨æˆ·çº§åˆ«é™é€Ÿé…ç½®

- ğŸ“Š **å¯è§†åŒ–ç®¡ç†ç•Œé¢**
  - å®æ—¶æ£€æµ‹ç»Ÿè®¡ä»ªè¡¨ç›˜
  - æ£€æµ‹ç»“æœå†å²æŸ¥è¯¢
  - é£é™©åˆ†å¸ƒå¯è§†åŒ–å›¾è¡¨
  - é…ç½®ç®¡ç†é¡µé¢

- ğŸš¦ **é™é€Ÿä¸ç›‘æ§**
  - ç”¨æˆ·çº§åˆ«è¯·æ±‚é¢‘ç‡é™åˆ¶
  - å®æ—¶æ€§èƒ½ç›‘æ§
  - æ£€æµ‹ç»“æœç»Ÿè®¡åˆ†æ
  - å¼‚å¸¸è®¿é—®æ£€æµ‹

- ğŸ”Œ **APIæ¥å£**
  - OpenAIå…¼å®¹çš„APIæ ¼å¼
  - RESTful APIè®¾è®¡
  - å®Œæ•´çš„APIæ–‡æ¡£
  - å¤šè¯­è¨€SDKæ”¯æŒ

- ğŸ³ **éƒ¨ç½²æ”¯æŒ**
  - Docker Composeä¸€é”®éƒ¨ç½²
  - PostgreSQLæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
  - è‡ªåŠ¨å¥åº·æ£€æŸ¥
  - ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹

### æŠ€æœ¯ç‰¹æ€§ Technical Features
- **é«˜æ€§èƒ½**ï¼šå¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒé«˜å¹¶å‘è¯·æ±‚
- **é«˜å¯ç”¨**ï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œæ”¯æŒæ°´å¹³æ‰©å±•
- **é«˜å®‰å…¨**ï¼šæ•°æ®åŠ å¯†ä¼ è¾“ï¼Œæ”¯æŒå®Œå…¨ç¦»çº¿éƒ¨ç½²
- **é«˜ç²¾åº¦**ï¼šæ¨¡å‹å‡†ç¡®ç‡>97%ï¼Œè¯¯æŠ¥ç‡<0.5%

### æ–‡æ¡£ Documentation
- ğŸ“– å®Œæ•´çš„APIæ–‡æ¡£
- ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—
- ğŸ—ï¸ è¯¦ç»†çš„äº§å“ä»‹ç»
- ğŸ¤ è´¡çŒ®æŒ‡å—
- ğŸ”’ å®‰å…¨è¯´æ˜

### å¼€æºæ¨¡å‹ Open Source Model
- ğŸ¤— HuggingFaceæ¨¡å‹å¼€æºï¼š`xiangxinai/Xiangxin-Guardrails-Text`
- Apache 2.0è®¸å¯åè®®
- æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡æ£€æµ‹
- æä¾›å®Œæ•´çš„æ¨ç†ä»£ç ç¤ºä¾‹

### å®¢æˆ·ç«¯åº“ Client Libraries
- ğŸ Python SDKï¼š`xiangxinai`
- ğŸ“± JavaScript SDKï¼š`xiangxinai-js`
- ğŸŒ HTTP APIå…¼å®¹OpenAIæ ¼å¼

---

## ç‰ˆæœ¬è¯´æ˜ Version Notes

### è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
- **MAJOR**ï¼šä¸å…¼å®¹çš„APIä¿®æ”¹
- **MINOR**ï¼šå‘åå…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **PATCH**ï¼šå‘åå…¼å®¹çš„é—®é¢˜ä¿®æ­£

### å˜æ›´ç±»å‹è¯´æ˜
- **Added æ–°å¢**ï¼šæ–°åŠŸèƒ½
- **Changed å˜æ›´**ï¼šå¯¹ç°æœ‰åŠŸèƒ½çš„å˜æ›´
- **Deprecated å¼ƒç”¨**ï¼šä¸ä¹…å°†ç§»é™¤çš„åŠŸèƒ½
- **Removed ç§»é™¤**ï¼šå·²ç§»é™¤çš„åŠŸèƒ½
- **Fixed ä¿®å¤**ï¼šä»»ä½•bugä¿®å¤
- **Security å®‰å…¨**ï¼šå®‰å…¨ç›¸å…³çš„ä¿®æ”¹

---

## å‡çº§æŒ‡å— Upgrade Guide

### ä» 0.x å‡çº§åˆ° 1.0.0
è¿™æ˜¯é¦–ä¸ªæ­£å¼ç‰ˆæœ¬ï¼ŒåŒ…å«ä»¥ä¸‹é‡å¤§å˜æ›´ï¼š

#### æ•°æ®åº“å˜æ›´
- ä»SQLiteè¿ç§»åˆ°PostgreSQL
- æ–°çš„æ•°æ®åº“schemaå’Œè¡¨ç»“æ„
- ç”¨æˆ·æ•°æ®å’Œé…ç½®éœ€è¦é‡æ–°å¯¼å…¥

#### APIå˜æ›´
- ç»Ÿä¸€ä½¿ç”¨OpenAIå…¼å®¹çš„APIæ ¼å¼
- æ–°çš„è®¤è¯æ–¹å¼ï¼ˆBearer Tokenï¼‰
- å“åº”æ ¼å¼æ ‡å‡†åŒ–

#### é…ç½®å˜æ›´
- æ–°çš„ç¯å¢ƒå˜é‡é…ç½®
- Docker Composeé…ç½®æ›´æ–°
- ç§»é™¤äº†ä¸€äº›è¿‡æ—¶çš„é…ç½®é¡¹

#### è¿ç§»æ­¥éª¤
1. å¤‡ä»½ç°æœ‰æ•°æ®
2. æ›´æ–°åˆ°æ–°ç‰ˆæœ¬ä»£ç 
3. è¿è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬
4. æ›´æ–°APIè°ƒç”¨ä»£ç 
5. æµ‹è¯•éªŒè¯åŠŸèƒ½

---

## è´¡çŒ®è€… Contributors

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼š

- **æ ¸å¿ƒå›¢é˜Ÿ**
  - [@wanglei](mailto:wanglei@xiangxinai.cn) - é¡¹ç›®è´Ÿè´£äºº
  - è±¡ä¿¡AIå›¢é˜Ÿ

- **ç¤¾åŒºè´¡çŒ®è€…**
  - æ¬¢è¿æ‚¨æˆä¸ºç¬¬ä¸€ä¸ªç¤¾åŒºè´¡çŒ®è€…ï¼

---

## æ”¯æŒä¸è”ç³» Support & Contact

- ğŸ“§ **æŠ€æœ¯æ”¯æŒ**ï¼šwanglei@xiangxinai.cn
- ğŸŒ **å®˜æ–¹ç½‘ç«™**ï¼šhttps://xiangxinai.cn
- ğŸ“± **GitHub Issues**ï¼šhttps://github.com/xiangxinai/xiangxin-guardrails/issues
- ğŸ’¬ **ç¤¾åŒºè®¨è®º**ï¼šhttps://github.com/xiangxinai/xiangxin-guardrails/discussions

---

*è®©AIæ›´å®‰å…¨ï¼Œè®©åº”ç”¨æ›´å¯ä¿¡* ğŸ›¡ï¸